Feature: Выплата долга
  Как участник расхода
  Я хочу отметить что заплатил долг
  Чтобы другие видели что я больше не должен

  Scenario: Выплата долга
    Given существует расход "пицца" на 4200 рублей с участниками @Петя @Маша @Коля
    And Петя должен 1400 рублей
    When Петя пишет "скинул Васе 1400"
    Then долг Пети уменьшается на 1400 рублей
    And Петя больше не должен
    And бот отвечает "Принял! Петя больше не должен. Остались: Маша (1400р), Коля (1400р)"

  Scenario: Частичная выплата долга
    Given существует расход "обед" на 1000 рублей с участниками @Петя
    And Петя должен 1000 рублей
    When Петя пишет "скинул Васе 500"
    Then долг Пети уменьшается на 500 рублей
    And Петя должен ещё 500 рублей
    And бот отвечает "Принял! Петя должен ещё 500р"

  Scenario: Выплата несуществующего долга
    Given бот запущен
    And Петя не должен Васе
    When Петя пишет "скинул Васе 100"
    Then бот отвечает "У вас нет долга перед Васей"

  Scenario: Выплата больше чем долг
    Given существует расход "пицца" на 1000 рублей с участниками @Петя
    And Петя должен 1000 рублей
    When Петя пишет "скинул Васе 1500"
    Then бот отвечает "Сумма выплаты (1500р) больше долга (1000р)"

